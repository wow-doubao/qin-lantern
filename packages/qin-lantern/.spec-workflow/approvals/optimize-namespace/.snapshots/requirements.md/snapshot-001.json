{
  "id": "snapshot_1768059136258_n5c90txkg",
  "approvalId": "approval_1768059136250_yusxuf6oz",
  "approvalTitle": "Requirements: Optimize Namespace & Style Separation",
  "version": 1,
  "timestamp": "2026-01-10T15:32:16.258Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Requirements: Optimize Namespace & Style Separation\n\n## 1. Executive Summary\nThis feature aims to optimize the component library by implementing a dynamic namespace system and separating component styles into independent SCSS files. This will resolve potential style conflicts when using the library alongside other Element Plus based projects and enable granular style customization.\n\n## 2. Problem Statement\n- **Hardcoded Namespaces**: Components currently use hardcoded class names (likely 'el-' or similar), which can conflict with the host application or other libraries.\n- **Tangled Styles**: Styles are embedded within `.vue` files, making it difficult to override them or import only the necessary styles for tree-shaking.\n- **Missing Build Outputs**: The build process does not generate standalone SCSS files, limiting consumers' ability to use the library's SCSS variables and mixins.\n- **Limited Resolver**: The current `QinLanternResolver` lacks configuration options for namespace and style import types found in standard Element Plus resolvers.\n\n## 3. User Stories\n### 3.1 Namespace Customization\n- **As a developer**, I want to configure a custom namespace (e.g., `ql-`) for the component library so that its styles do not conflict with Element Plus or other libraries.\n- **As a developer**, I want the `QinLanternResolver` to respect my custom namespace configuration when automatically importing components.\n\n### 3.2 Style Management\n- **As a developer**, I want component styles to be located in dedicated SCSS files so that I can easily find and manage them.\n- **As a developer**, I want to be able to import only the styles I need for specific components to minimize bundle size.\n- **As a theme creator**, I want access to the library's SCSS variables so that I can customize the look and feel to match my brand.\n\n### 3.3 Build & Integration\n- **As a developer**, I want the `dist` folder to contain source SCSS files after building, so I can use them in my own SCSS build pipeline.\n- **As a developer**, I want to use `importStyle: 'sass'` in the resolver to load source SCSS files instead of pre-compiled CSS.\n\n## 4. Functional Requirements\n1.  **Dynamic Namespace Support**:\n    - All components must use a hook (e.g., `useNamespace`) to generate class names dynamically based on a global configuration.\n    - Hardcoded class prefixes must be replaced with dynamic variables in templates and scripts.\n2.  **Style Separation**:\n    - Extract all `<style>` blocks from `.vue` files into `src/components/[name]/style/index.scss`.\n    - Create a global `src/styles` directory for shared variables, mixins, and reset styles.\n3.  **SCSS Architecture**:\n    - Implement a variable system (BEM) that integrates with or extends Element Plus variables.\n    - Ensure all component SCSS files import necessary dependencies (variables, mixins).\n4.  **Resolver Enhancement**:\n    - Update `QinLanternResolver` to accept `namespace` and `importStyle` options.\n    - Ensure it correctly resolves paths to the new SCSS files.\n5.  **Build Configuration**:\n    - Configure Vite to copy SCSS files to the output directory while preserving structure or flattening as appropriate for import.\n\n## 5. Non-Functional Requirements\n- **Backward Compatibility**: The default namespace should remain compatible with existing usage if possible (or clearly documented as a breaking change).\n- **Performance**: Style separation should not negatively impact load times; tree-shaking should be improved.\n- **Maintainability**: The new directory structure must be consistent across all components.\n\n## 6. Risks & Mitigation\n- **Risk**: Refactoring all components to use `useNamespace` is error-prone and might miss some hardcoded classes.\n    - **Mitigation**: Comprehensive testing and potentially using regex/AST scripts to find hardcoded strings.\n- **Risk**: SCSS variable dependency hell.\n    - **Mitigation**: Establish a clear hierarchy of imports (Global -> Component).\n\n## 7. Success Metrics\n- Users can successfully configure `namespace: 'custom'` and see class names update (e.g., `.custom-button`).\n- `dist` folder contains valid SCSS files.\n- `QinLanternResolver` works with `importStyle: 'sass'`.\n",
  "fileStats": {
    "size": 4200,
    "lines": 57,
    "lastModified": "2026-01-10T15:32:09.290Z"
  },
  "comments": []
}